# 发票认证-盘进项

- 接口描述：`发票认证`
- 接口名称：`lazy.opweb.pjx.fprz`
- 报文版本：1.0
- 接口说明：发票认证。

##### 请求报文：
```json
{
	"nsrsbh": "纳税人识别号",
	"token": "token",
	"skssq": "税款所属期",
	"rzms": "认证模式",
	"fpdm": "发票代码",
	"fphm": "发票号码",
	"yxse": "有效税额"
}
```
#####  请求参数说明：

| 索引 |    ID    |     名称     | 长度 | 必须 | 说明                                    |
| :--: | :------: | :----------: | :--: | :--: | :-------------------------------------- |
|  1   |  nsrsbh   |  纳税人识别号  | 20  |  是  | 企业税号                                |
|  2   |  token  | token |  100  |  是  | 访问的身份标识                                |
|  3   |  skssq   | 税款所属期 | 6  |  是  | 格式：YYYYMM<br/>税款所属期  退税认证时，为当前月 |
| 4 | pjlx | 票据类型 | 1 | 否 | 0：增值税发票<br/> 1：海关缴款书<br/> 默认增值税发票 |
|  5   |   rzms   |   认证模式   |  2   |  否  | 1：抵扣勾选（默认抵扣）<br/>-1：取消抵扣勾选 <br/>2：退税<br/>4：不抵扣勾选<br/>-4：取消不抵扣勾选 |
|  6   |   fpdm   |   发票代码   |  12  |  否  | 多张发票用英文逗号隔开，发票代码号码对应<br>票据类型是 增值税发票时，不为空；<br/> 票据类型是 海关缴款书时，为空； |
|  7   | fphm |  发票号码  |  8  |  是  | 多张发票用英文逗号隔开<br/>票据类型是 海关缴款书时， 表示 缴款书号码 |
|  8   | yxse |  有效税额  |    |  否  | 多张发票用英文逗号隔开<br/>默认 整张发票的税额<br/>仅抵扣勾选，支持该字段 |


##### 返回报文：

```json
{
	"code": 200,
	"msg": "请求成功",
	"data": {
		"rawcode": "",
		"invoices": [{
			"InvoiceCode": "",
			"InvoiceNumber": "",
			"BillingDate": "",
			"TotalAmount": "",
			"TotalTax": "",
			"ValidTax": "",
			"DeductibleType": "",
			"DeductibleMode": "",
			"DeductibleDate": "",
			"DeductiblePeriod": "",
			"CheckStatus": "",
			"CheckDate": "",
			"ManagementStatus": "",
			"DeductibleResult": ""
		}]
	}
}
```

#####  返回参数说明：


| 索引 |        ID        |   名称    |   长度   | 必须 | 说明                                                         |
| :--: | :--------------: | :-------: | :------: | :--: | ------------------------------------------------------------ |
|  1   |       code       | 返回代码  |  10-100  |  是  | 200请求成功，400 请求失败 500 请求异常                       |
|  2   |       msg        | 返回信息  |          |  是  |                                                              |
|  3   |     rawcode      |           | char(10) |  是  | 返回的接口状态码  参考《获取token》                                |
|  4   |   invoices    | 发票数据集合  |        |    |                                                              |
|  5   |   InvoiceCode    | 发票代码  |    12    |  是  |                                                              |
|  6  |  InvoiceNumber   | 发票号码  |    8     |  是  |                                                              |
|  7  |   BillingDate    | 开票日期  |    10    |  是  | 格式：YYYY-MM-DD                                             |
|  8  |   TotalAmount    | 发票金额  |    20    |  是  |                                                              |
|  9  |     TotalTax     | 发票税额  |    20    |  是  |                                                              |
|  10  |     ValidTax     | 有效税额  |    20    |  是  |                                                              |
|  11  |  DeductibleType  | 认证方式  |    1     |  是  | 1：勾选<br/>2：扫描 <br/>已认证时不为空                      |
|  12  |  DeductibleMode  | 认证模式  |    2     |  是  | 1：抵扣<br/>2：退税 <br/>3：代办退税 <br/>4：不抵扣<br/>7：未准予退税<br/>8：未准予代办退税<br/>已认证时不为空 |
|  13  |  DeductibleDate  | 认证日期  |    10    |  是  | 格式：YYYY-MM-DD <br/>已认证时不为空                         |
|  14  | DeductiblePeriod | 认证属期  |    6     |  是  | 格式：YYYYMM<br/>已认证时不为空                              |
|  15  |   CheckStatus    | 勾选状态  |    1     |  是  | 0：否 ；1：是                                                |
|  16  |    CheckDate     | 勾选日期  |    10    |  是  | 格式：YYYY-MM-DD <br/>已勾选或已认证时不为空                 |
|  17  | ManagementStatus | 管理状态  |    1     |  是  | 0-正常,1-非正常                                              |
|  18  |   DeductibleResult   | 认证结果  |    20     |  是  | 1.成功(抵扣/不抵扣/取消抵扣/取消不抵扣)<br/>2.无此票<br/>3.该票异常无法认证<br/>4.该票已认证过<br/>5.该票已经逾期无法认证<br/>7.申请认证月份已过期<br/>(传入的属期，小于企业的当前税款所属期)<br/>8-[xxxxxx].认证操作执行异常<br/>10.该票超出可操作开票日期范围上限<br/>11.该票已作废<br/>12.该票已红冲<br/>13.未申报，属期尚未切换<br/>(传入的属期，大于企业的当前税款所属期)<br/>15.失控发票<br/>16.红字发票不能认证<br/>17.该发票类型不符合退税认证条件<br/>18.有效税额不合法<br/>19.已勾选<br/>20.当期已锁定勾选 <br/>21.管理状态异常<br/>31.数据校验异常<br/>32.认证期限校验异常<br/>23.发票当前未勾选(取消勾选)<br/>24.勾选属期非当前属期,不能取消(取消勾选) <br/>  25.当前勾选用途非抵扣勾选(取消勾选)<br/>26.当前勾选用途非不抵扣勾选（取消不抵扣勾选） |