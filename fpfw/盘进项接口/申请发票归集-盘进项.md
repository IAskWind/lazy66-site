# 申请发票归集-盘进项

- 接口描述：`申请发票归集`

- 接口名称：`lazy.opweb.pjx.sq_fpgj`

- 报文版本：1.0

- 接口说明：申请发票归集。

  1、同一个开票月份的每一类发票每24小时申请下载请求不超过1次；

  2、当前开票月份的每一类发票最多申请5次发票下载，历史开票月份的每一类发票每30天可申请一次发票下载；
  3、提交的申请会在24小时内被处理；

  4、可以下载7天内申请且处理完成的发票；

  5、归集完成后，每一类发票 归集文件 在24小时内允许下载5次。

  6、可以提交不同月份的申请； 

  7、发票归集发票种类：专票、普票、电票、卷票、机动车发票、二手车发票发票归集: 

  8、一般纳税人、和小规模

  9、归集到是个加密的压缩文件   里面包含execl，主票面数据和明细数据

  10、.税务局那边接口承诺的24小时必定处理，一般有特殊情况，主要跟税局端系统当前处理能力有关， 一般 月底最后1天，月初前5天，是高峰期，税局端不会处理， 高峰期过后 24小时内会处理。

##### 请求报文：

```json
{
	"nsrsbh": "纳税人识别号",
	"token": "token",
	"fplx": "发票类型",
	"sjlx": "数据类型",
	"kprqq": "开票日期起",
	"kprqz": "开票日期止",
	"jymm": "解压密码"
}
```

#####  请求参数说明：

| 索引 |   ID   |     名称     | 长度 | 必须 | 说明                                                         |
| :--: | :----: | :----------: | :--: | :--: | :----------------------------------------------------------- |
|  1   | nsrsbh | 纳税人识别号 |  20  |  是  | 企业税号                                                     |
|  2   | token  |    token     | 100  |  是  | 访问的身份标识                                               |
|  3   |  fplx  |   发票类型   |  20  |  否  | 发票类型(多个以,分隔)  <br/>01:增值税专用发票<br/>03:机动车销售统一发票 <br/>04:增值税普通发票  <br/>10:增值税普通发票（电子）<br/>11:增值税普通发票（卷票）<br/>15:二手车销售统一发票<br/>默认：01,03,04,10,11,15 |
|  4   |  sjlx  |   数据类型   |  10  |  否  | 数据类型(多个以,分隔) <br/>1:进项票<br/>2:销项票 <br/>默认： 1,2 |
|  5   | kprqq  |  开票日期起  |  10  |  是  | 开票日期起 YYYY-MM-DD                                        |
|  6   | kprqz  |  开票日期止  |  10  |  是  | 开票日期止 YYYY-MM-DD<br/>开票日期起、止 必须在同一个月内    |
|  7   |  jymm  |   解压密码   |      |  否  | 解压密码 默认为企业税号                                      |

##### 返回报文：

```json
{
	"code": 200,
	"msg": "请求成功",
	"data": {
		"rawcode": "",
		"rawmsg": "",
		"ApplicationDate": ""
	}
}
```

#####  返回参数说明：


| 索引 |        ID        |    名称    |   长度   | 必须 | 说明                                                         |
| :--: | :--------------: | :--------: | :------: | :--: | ------------------------------------------------------------ |
|  1   |       code       |  返回代码  |  10-100  |  是  | 200请求成功，400 请求失败 500 请求异常                       |
|  2   |       msg        |  返回信息  |          |  是  |                                                              |
|  3  |     rawcode      |            | char(10) |  是  | 返回的接口状态码  参考《获取token》                        |
|  4  |      rawmsg      |    |          |  是  | 返回的错误信息                                |
|  5  | ApplicationDate | 归集申请日期 |          |  否  | 归集申请日期<br/>格式：YYYY-MM-DD       |
